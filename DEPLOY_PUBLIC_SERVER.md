# üåê –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –ø—É–±–ª—ñ—á–Ω–æ–≥–æ WebSocket —Å–µ—Ä–≤–µ—Ä–∞

## –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç: Railway.app

### –ö—Ä–æ–∫ 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–¥—É

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `requirements_server.txt`:
```
websockets==12.0
```

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `railway.json`:
```json
{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "startCommand": "python websocket_server.py",
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10
  }
}
```

### –ö—Ä–æ–∫ 2: –î–µ–ø–ª–æ–π –Ω–∞ Railway

1. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://railway.app
2. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –ø—Ä–æ–µ–∫—Ç "New Project"
3. –í–∏–±–µ—Ä—ñ—Ç—å "Deploy from GitHub repo"
4. –í–∏–±–µ—Ä—ñ—Ç—å –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
5. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–∑–≥–æ—Ä–Ω–µ —Å–µ—Ä–≤–µ—Ä
6. –û—Ç—Ä–∏–º–∞–π—Ç–µ –ø—É–±–ª—ñ—á–Ω–∏–π URL

### –ö—Ä–æ–∫ 3: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

1. –í CloudBell App –≤—ñ–¥–∫—Ä–∏–π—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ö–º–∞—Ä–Ω–æ—ó —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—ó
2. –í–≤–µ–¥—ñ—Ç—å –ø—É–±–ª—ñ—á–Ω–∏–π URL: `wss://your-app.railway.app`
3. –ó–±–µ—Ä–µ–∂—ñ—Ç—å –∑–º—ñ–Ω–∏

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: Heroku

### 1. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª–∏:

**Procfile**:
```
web: python websocket_server.py
```

**runtime.txt**:
```
python-3.13.2
```

### 2. –î–µ–ø–ª–æ–π:

```bash
heroku login
heroku create cloudbell-audio
git init
git add .
git commit -m "Initial commit"
git push heroku main
```

### 3. –û—Ç—Ä–∏–º–∞–π—Ç–µ URL:

```bash
heroku info
```

–í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ URL —Ç–∏–ø—É: `wss://cloudbell-audio.herokuapp.com`

## –ë–µ–∑–ø–µ–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

### –î–æ–¥–∞–π—Ç–µ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é –≤ websocket_server.py:

```python
async def handler(websocket, path):
    # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–æ–∫–µ–Ω—É
    token = websocket.request_headers.get('Authorization')
    if token != 'your-secret-token-here':
        await websocket.close(code=4001, reason="Unauthorized")
        return
    
    # –†–µ—à—Ç–∞ –∫–æ–¥—É...
```

### –í CloudBell App –¥–æ–¥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω:

–í –º–µ—Ç–æ–¥—ñ `websocket_client` –¥–æ–¥–∞–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏:
```python
async with websockets.connect(
    server_url,
    extra_headers={"Authorization": "your-secret-token-here"}
) as websocket:
```

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏

1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å CloudBell App –Ω–∞ –≤–∞—à–æ–º—É –ü–ö
2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –ø—É–±–ª—ñ—á–Ω–∏–π URL —Å–µ—Ä–≤–µ—Ä–∞
3. –†–æ–∑–ø–æ—á–Ω—ñ—Ç—å —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—é
4. –ù–∞ Raspberry Pi –∑–∞–ø—É—Å—Ç—ñ—Ç—å `raspberry_pi_receiver.py` –∑ —Ç–∏–º –∂–µ URL
5. –ê—É–¥—ñ–æ –ø–æ–≤–∏–Ω–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏—Å—è —á–µ—Ä–µ–∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç!

## –†–æ–∑–±—ñ–∂–Ω–æ—Å—Ç—ñ –º—ñ–∂ –ª–æ–∫–∞–ª—å–Ω–∏–º —Ç–∞ –ø—É–±–ª—ñ—á–Ω–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º

| –õ–æ–∫–∞–ª—å–Ω–∏–π | –ü—É–±–ª—ñ—á–Ω–∏–π |
|-----------|-----------|
| `ws://localhost:8765` | `wss://your-app.railway.app` |
| –¢—ñ–ª—å–∫–∏ –≤ –ª–æ–∫–∞–ª—å–Ω—ñ–π –º–µ—Ä–µ–∂—ñ | –î–æ—Å—Ç—É–ø –∑ –±—É–¥—å-—è–∫–æ–≥–æ –º—ñ—Å—Ü—è |
| –ë–µ–∑ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó | –ó –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—î—é |
| ws:// (–Ω–µ–±–µ–∑–ø–µ—á–Ω–∏–π) | wss:// (–±–µ–∑–ø–µ—á–Ω–∏–π) |

## –ü–æ—Ä–∞–¥–∏

- ‚úÖ –ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ WSS –¥–ª—è –ø—É–±–ª—ñ—á–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä—ñ–≤
- ‚úÖ –î–æ–¥–∞–π—Ç–µ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é –¥–ª—è –±–µ–∑–ø–µ–∫–∏
- ‚úÖ –û–±–º–µ–∂—Ç–µ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –æ–¥–Ω–æ—á–∞—Å–Ω–∏—Ö –ø—ñ–¥–∫–ª—é—á–µ–Ω—å
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ environment variables –¥–ª—è —Ç–æ–∫–µ–Ω—ñ–≤
- ‚úÖ –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è

## –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º–∏:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –≤—ñ–¥–∫—Ä–∏—Ç–∏–π –ø–æ—Ä—Ç
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª (ws/wss)

