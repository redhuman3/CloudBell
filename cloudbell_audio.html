<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>CloudBell Audio</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Arial,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px}
.container{background:#fff;border-radius:20px;padding:30px;box-shadow:0 20px 60px rgba(0,0,0,.3);max-width:500px;width:100%}
h1{color:#333;margin-bottom:10px;text-align:center}
.subtitle{color:#666;text-align:center;margin-bottom:30px;font-size:14px}
.status{padding:15px;border-radius:10px;margin-bottom:20px;text-align:center;font-weight:bold}
.status.disconnected{background:#fee;color:#c33}
.status.connected{background:#efe;color:#3c3}
button{width:100%;padding:15px;border:none;border-radius:8px;font-size:18px;font-weight:bold;cursor:pointer;margin:5px 0}
.btn-connect{background:#4CAF50;color:#fff}
.btn-disconnect{background:#f44336;color:#fff}
.logs{margin-top:20px;max-height:200px;overflow-y:auto;background:#f9f9f9;padding:15px;border-radius:10px;font-family:monospace;font-size:12px}
.log-entry{margin:5px 0;padding:5px;border-left:3px solid #667eea;padding-left:10px}
.log-entry.success{border-left-color:#4CAF50}
.log-entry.error{border-left-color:#f44336}
.log-entry.play{border-left-color:#ff9800}
</style>
</head>
<body>
<div class="container">
<h1>üîî CloudBell</h1>
<p class="subtitle">–°–ª—É—Ö–∞–π—Ç–µ –¥–∑–≤—ñ–Ω–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ</p>
<div id="status" class="status disconnected">‚ùå –ù–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ</div>
<button class="btn-connect" onclick="connect()">–ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è</button>
<button class="btn-disconnect" onclick="disconnect()">–í—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è</button>
<div class="logs" id="logs"></div>
</div>
<script>
let ws=null;
let audio=new Audio();
function log(m,t='info'){const l=document.getElementById('logs');const e=document.createElement('div');e.className=`log-entry ${t}`;e.textContent=`[${new Date().toLocaleTimeString()}] ${m}`;l.appendChild(e);l.scrollTop=l.scrollHeight}
function updateStatus(s,t){const e=document.getElementById('status');e.className=`status ${s}`;e.textContent=t}
function connect(){const u='wss://cloudbell.up.railway.app';if(ws&&ws.readyState===WebSocket.OPEN){log('–í–∂–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ!','error');return}
updateStatus('connecting','‚è≥ –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è...');log(`–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ: ${u}`,'info');try{ws=new WebSocket(u);ws.onopen=function(){updateStatus('connected','‚úÖ –ü—ñ–¥–∫–ª—é—á–µ–Ω–æ');log('–ü—ñ–¥–∫–ª—é—á–µ–Ω–æ –¥–æ —Å–µ—Ä–≤–µ—Ä–∞!','success')};ws.onmessage=function(e){try{const d=JSON.parse(e.data);if(d.type==='audio_stream'){log(`üîî –ó–≤—É–∫: ${d.file}`,'play');try{const b=atob(d.data);const blob=new Blob([new Uint8Array([...b].map(c=>c.charCodeAt(0)))],{type:'audio/mpeg'});const url=URL.createObjectURL(blob);audio.src=url;audio.play().then(()=>{log('‚úÖ –í—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–≤—É–∫—É','success')}).catch(e=>{log(`‚ùå –ü–æ–º–∏–ª–∫–∞: ${e.message}`,'error')});audio.onended=()=>URL.revokeObjectURL(url)}catch(e){log(`‚ùå –ü–æ–º–∏–ª–∫–∞ –¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è: ${e.message}`,'error')}}else if(d.type==='audio_url'){log(`üîî –ó–≤—É–∫: ${d.file}`,'play');audio.src=d.url;audio.play().then(()=>{log('‚úÖ –í—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–≤—É–∫—É','success')}).catch(e=>{log(`‚ùå –ü–æ–º–∏–ª–∫–∞: ${e.message}`,'error')});if('Notification' in window){if(Notification.permission==='granted'){new Notification('–î–∑–≤—ñ–Ω–æ–∫',{body:d.file,icon:'üîî'})}else if(Notification.permission!=='denied'){Notification.requestPermission()}}}else if(d.type==='audio_event'){log(`üîî –ü–æ–¥—ñ—è: ${d.file} (${d.event})`,'play');if('Notification' in window){if(Notification.permission==='granted'){new Notification('–î–∑–≤—ñ–Ω–æ–∫',{body:d.file,icon:'üîî'})}else if(Notification.permission!=='denied'){Notification.requestPermission()}}}}catch(e){log(`–ü–æ–º–∏–ª–∫–∞: ${e}`,'error')}};ws.onerror=function(e){log('–ü–æ–º–∏–ª–∫–∞ –∑\'—î–¥–Ω–∞–Ω–Ω—è','error')};ws.onclose=function(){updateStatus('disconnected','‚ùå –ù–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ');log('–ó\'—î–¥–Ω–∞–Ω–Ω—è –∑–∞–∫—Ä–∏—Ç–æ','error')}}catch(e){log(`–ü–æ–º–∏–ª–∫–∞: ${e}`,'error');updateStatus('disconnected','‚ùå –ü–æ–º–∏–ª–∫–∞')}}
function disconnect(){if(ws){ws.close();ws=null}
updateStatus('disconnected','‚ùå –ù–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ');log('–í—ñ–¥–∫–ª—é—á–µ–Ω–æ','info')}
</script>
</body>
</html>


