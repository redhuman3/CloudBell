# ☁️ CloudBell App - Хмарна трансляція звуку

## Опис системи

CloudBell App тепер підтримує хмарну трансляцію звуку, що дозволяє відтворювати звуки дзвінків на віддалених пристроях через інтернет.

## Архітектура

```
[PC з CloudBell App] → [WebSocket Server] → [Raspberry Pi + DAC]
```

1. **PC (основний)**: Захоплює звук і транслює через WebSocket
2. **WebSocket Server**: Проміжний сервер для передачі аудіо
3. **Raspberry Pi**: Отримує звук і відтворює через DAC

## Налаштування

### 1. Встановлення залежностей

```bash
pip install -r requirements.txt
```

### 2. Запуск WebSocket сервера

```bash
python websocket_server.py
```

Сервер запуститься на `ws://localhost:8765`

### 3. Налаштування PC (CloudBell App)

1. Запустіть CloudBell App
2. У блоці "☁️ Хмарна трансляція" введіть URL сервера
3. Натисніть "▶️ Почати трансляцію"

### 4. Налаштування Raspberry Pi

1. Встановіть залежності:
```bash
pip install pyaudio websockets
```

2. Запустіть ресивер:
```bash
python raspberry_pi_receiver.py
```

3. Введіть URL сервера (наприклад: `ws://192.168.1.100:8765`)

## Обладнання для Raspberry Pi

### Geekworm X302 HiFi DAC HAT

1. **Підключення**:
   - Встановіть HAT на Raspberry Pi Zero 2W
   - Підключіть до GPIO роз'ємів

2. **Налаштування**:
```bash
# Включіть I2S в raspi-config
sudo raspi-config
# Advanced Options → I2S → Enable

# Перезавантажте
sudo reboot
```

3. **Тестування звуку**:
```bash
# Перевірте чи працює аудіо
speaker-test -t wav
```

## Налаштування мережі

### Локальна мережа
- PC і Raspberry Pi повинні бути в одній мережі
- Використовуйте локальний IP замість localhost

### Публічний сервер
- Розгорніть WebSocket сервер на хмарному сервісі
- Оновіть URL в налаштуваннях

## Усунення проблем

### Проблеми з аудіо
```bash
# Перевірте доступні аудіо пристрої
arecord -l
aplay -l

# Тестування запису
arecord -f cd -d 5 test.wav
aplay test.wav
```

### Проблеми з мережею
```bash
# Перевірте підключення
ping <server_ip>
telnet <server_ip> 8765
```

### Проблеми з WebSocket
- Перевірте чи запущений сервер
- Перевірте URL в налаштуваннях
- Перевірте файрвол

## Розширення функціональності

### Додавання шифрування
- Додайте шифрування AES для аудіо даних
- Використовуйте SSL/TLS для WebSocket

### Багатокористувацька підтримка
- Додайте автентифікацію клієнтів
- Реалізуйте кімнати/канали

### Оптимізація
- Зменшіть розмір chunk для меншої затримки
- Додайте буферизацію для стабільності

## Ліцензування

Система підтримує ліцензійні ключі для контролю доступу до хмарної функціональності.

### Генерація ключів
```bash
python generate_license.py
```

### Валідація
Ключі автоматично валідуються при запуску програми.
